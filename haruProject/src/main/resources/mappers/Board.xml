<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.haruProject.BoardMapper">

	<select id="HR_SelectTotalBoardCnt" resultType="int">
		SELECT COUNT(*) FROM BOARD
	</select>
	
	
	<select id="HR_SelectBoardList" parameterType="Map" resultType="Board">
		SELECT *
		FROM (
		    SELECT ROWNUM rn, bb.*
		    FROM (
		        SELECT b.bno, b.btitle, m.mname, b.reg_date, b.bview_count, b.board_type_mcd, c.content
				FROM BOARD b
                     JOIN member m ON b.memno = m.memno
                     JOIN (SELECT mcd,content FROM common WHERE bcd= 350) c ON b.board_type_mcd = c.mcd
				WHERE b.btitle IS NOT NULL
				ORDER BY b.bno desc
		    )bb
		)
		WHERE rn BETWEEN #{startRow} AND #{endRow}
	</select>
	
	<select id="HR_SelectBoardDetailList" parameterType="Map" resultType="Board">
		SELECT b.bno, b.resno, c.content as item, m.mname, b.reg_date, b.update_date, b.bview_count, b.btitle, b.bcontents, b.bseq
		FROM BOARD b
		    JOIN COMMON C ON b.board_type_bcd = c.bcd AND b.board_type_mcd = c.mcd
		    JOIN MEMBER m ON b.memno = m.memno
		WHERE b.bgroup = #{bno}
	</select>

</mapper>